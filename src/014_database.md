####Database

Discussion of deployment and Heroku leads naturally in to the database setup that we created for this project.  [JawsDB](http://www.jawsdb.com/ "JawsDB") is a cloud based MySQL database that is being offered as an addon to Heroku currently.  The beneficial thing with an addon is that it does not count against your 5 dyno limit with Heroku, but it really operates on a cloud instance that is likely the same size as a dyno.  JawsDB is a SAAS (software as a service) cloud service which uses an IAAS provider to create cloud MySQL databases.

The obvious question at this point is why bother with a database at all of this type of software.  Initially we were using JSON objects for the mazes and storing those in a directory local to the running instance of the game.  For the near term this would be a fine choice, but in thinking to the future of the application and any future use that may contribute to the number of mazes it would quickly be necessary to use a more structured method of data storage that is not tied as closely to the actual repository for the game itself.  JawsDB presented itself as a way to deal with many of those issues in a very streamlined fashion nightly backups and scalability should the database need to grow beyond the free tier that JawsDB offers.

The team initially had very little experience using databases in a web app environment and went through a number of dead ends before coming to JawsDB and quickly realizing that the instance of the database should not be accessible directly by the game.  There are a number of stack overflow posts that deal with this very issue, but the most straightforward is [here](http://stackoverflow.com/questions/659970/why-is-it-not-advisable-to-have-the-database-and-web-server-on-the-same-machine "Why is it not advisable to have the database and web server on the same machine?").  As the post makes clear there are a number of reasons to separate these two facets of a system, but security and performance are the strongest reasons to do so.

This separation necessitated the creation of a RESTful API for communication with the database.  [Pautasso][restbook] states that, REST "in case of the HTTP protocol, a set of methods (e.g., GET, PUT, DELETE, POST, HEAD, OPTIONS, etc.) with well defined semantics in terms of the effect on the state of the resource, are defined. HTTP methods can be applied to all Web resource identifiers (e.g., URIs which conform to the HTTP scheme)."  This is the way our team used our RESTful API to communicate between the MySQL database and the application.  The API is hosted on the same dyno as the database and all communication with the outside world is handled through the API.  A diagram is shown below to describe the relationship of the app, server, database, and API.

![apidiagram](./img/apicommunication.png)

